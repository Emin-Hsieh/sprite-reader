{"version":3,"file":"generated.js","sources":["node_modules/browser-pack/_prelude.js","src/SpriteReader.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","SpriteReader","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"arguments","autoplay","h","canvas","fillColor","c","_","fps","from","m","loop","v","d","onReady","p","onComplete","k","y","onRepeat","C","w","onRepeatComplete","x","P","repeat","T","R","retina","S","j","reverse","z","b","to","M","_classCallCheck","_image","_json","_canvasCache","_ctxCache","_packCached","_canvasTarget","document","createElement","_ctxTarget","_multipackSize","_currentPack","_currentRepeat","_from","_current","_to","_isPlaying","_repeat","_fillColor","_interval","_then","_onReady","_onComplete","_onRepeat","_onRepeatComplete","E","I","frames","_side","O","D","Math","max","min","q","A","cloneNode","width","meta","size","height","getContext","sourceSize","Object","assign","style","fillStyle","update","_createClass","key","value","getCurrentRelatedToPack","drawImage","getImageData","putImageData","checkPack","frame","clearRect","fillRect","rotated","save","translate","rotate","PI","trimmed","spriteSourceSize","restore","drawCache","performance","now","draw","findPack","get","set"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export default class SpriteReader {\n\n\tconstructor(image = null, json = null, {\n\t\tautoplay = true,\n\t\tcanvas = null,\n\t\tfillColor = null,\n\t\tfps = 30,\n\t\tfrom = 0,\n\t\tloop = false,\n\t\tonReady = null,\n\t\tonComplete = null,\n\t\tonRepeat = null,\n\t\tonRepeatComplete = null,\n\t\trepeat = 0,\n\t\tretina = false,\n\t\treverse = false,\n\t\tto = null\n\t} = {}) {\n\n\t\tif (!image) throw new Error('image parameter can not be null');\n\t\tif (!json) throw new Error('json parameter can not be null');\n\t\tif (image.length && json.length && image.length !== json.length) throw new Error('image length must be equal to json length');\n\n\t\tthis._image = image;\n\t\tthis._json = json;\n\n\t\tthis._canvasCache = [];\n\t\tthis._ctxCache = [];\n\t\tthis._packCached = 0;\n\t\tthis._canvasTarget = canvas || document.createElement('canvas');\n\t\tthis._ctxTarget = null;\n\n\t\tthis._multipackSize = image.length || 1;\n\t\tthis._currentPack = 0;\n\t\tthis._currentRepeat = 0;\n\n\t\tthis._from = from;\n\t\tthis._current = from;\n\t\tthis._to = to;\n\n\t\tthis._isPlaying = autoplay;\n\t\tthis._repeat = loop ? -1 : repeat;\n\n\t\tthis._fillColor = fillColor;\n\n\t\tthis._interval = 1000 / fps;\n\t\tthis._then = null;\n\n\t\tthis._onReady = onReady;\n\t\tthis._onComplete = onComplete;\n\t\tthis._onRepeat = onRepeat;\n\t\tthis._onRepeatComplete = onRepeatComplete;\n\n\t\tif (!this._image.length) this._image = [this._image];\n\t\tif (!this._json.length) this._json = [this._json];\n\n\t\tif (this._to === null) {\n\n\t\t\tlet total = 0;\n\n\t\t\tfor (let i = 0; i < this._multipackSize; i++) {\n\n\t\t\t\ttotal += this._json[i].frames.length;\n\t\t\t}\n\n\t\t\tthis._to = total - 1;\n\t\t}\n\n\t\tthis._side = reverse || this._from > this._to ? -1 : 1;\n\n\t\tif (this._side === -1 && this._from < this._to) {\n\n\t\t\tconst tmpFrom = this._from;\n\t\t\tconst tmpTo = this._to;\n\n\t\t\tthis._from = Math.max(tmpFrom, tmpTo);\n\t\t\tthis._to = Math.min(tmpFrom, tmpTo);\n\t\t}\n\n\t\tconst tmpCanvas = document.createElement('canvas');\n\n\t\tfor (let i = 0; i < this._multipackSize; i++) {\n\n\t\t\tthis._canvasCache[i] = tmpCanvas.cloneNode(false);\n\n\t\t\tthis._canvasCache[i].width = this._json[i].meta.size.w;\n\t\t\tthis._canvasCache[i].height = this._json[i].meta.size.h;\n\n\t\t\tthis._ctxCache[i] = this._canvasCache[i].getContext('2d');\n\t\t}\n\n\t\tif (!canvas) {\n\n\t\t\tthis._canvasTarget.width = this._json[0].frames[0].sourceSize.w;\n\t\t\tthis._canvasTarget.height = this._json[0].frames[0].sourceSize.h;\n\n\t\t\tObject.assign(this._canvasTarget.style, {\n\t\t\t\twidth: `${this._canvasTarget.width / (retina ? 2 : 1)}px`,\n\t\t\t\theight: `${this._canvasTarget.height / (retina ? 2 : 1)}px`\n\t\t\t});\n\t\t}\n\n\t\tthis._ctxTarget = this._canvasTarget.getContext('2d');\n\n\t\tif (fillColor) this._ctxTarget.fillStyle = fillColor;\n\n\t\tthis.update(true);\n\t}\n\n\t// find the pack that contains the current frame\n\n\tfindPack() {\n\n\t\tlet currentTmp = 0;\n\t\tlet currentPackTmp = 0;\n\n\t\twhile (this._current > currentTmp) {\n\n\t\t\tcurrentTmp += this._json[currentPackTmp].frames.length;\n\n\t\t\tif (this._current > currentTmp) currentPackTmp++;\n\t\t}\n\n\t\tthis._currentPack = currentPackTmp;\n\t}\n\n\t// check if we are targeting outside the current pack\n\n\tcheckPack() {\n\n\t\tif (this.getCurrentRelatedToPack() > this._json[this._currentPack].frames.length - 1) {\n\n\t\t\tif (this._currentPack < this._multipackSize - 1) this._currentPack++;\n\t\t\telse this._currentPack = 0;\n\t\t}\n\t}\n\n\t// get an index0 based number related to the current pack\n\n\tgetCurrentRelatedToPack() {\n\n\t\tlet increment = 0;\n\n\t\tfor (let i = 0; i < this._currentPack; i++) increment += this._json[i].frames.length;\n\n\t\treturn this._current - increment;\n\t}\n\n\tdrawCache() {\n\n\t\tconst index = this._packCached;\n\t\tconst tmpCanvas = document.createElement('canvas');\n\t\tconst tmpCtx = tmpCanvas.getContext('2d');\n\n\t\ttmpCanvas.width = this._canvasCache[index].width;\n\t\ttmpCanvas.height = this._canvasCache[index].height;\n\n\t\ttmpCtx.drawImage(this._image[index], 0, 0);\n\t\tconst imgData = tmpCtx.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height);\n\t\tthis._ctxCache[index].putImageData(imgData, 0, 0);\n\n\t\tthis._packCached++;\n\n\t\tif (this._packCached === this._multipackSize && this._onReady) this._onReady();\n\n\t\t// if you simply call the below line, you will have latency when switching pack\n\n\t\t// this._ctxCache[i].drawImage(this._image[i], 0, 0);\n\t}\n\n\tdraw() {\n\n\t\tconst canvas = this._canvasTarget;\n\n\t\tthis.checkPack();\n\n\t\tconst currentFrame = this._json[this._currentPack].frames[this.getCurrentRelatedToPack()];\n\n\t\tconst newSize = {\n\t\t\tw: currentFrame.frame.w,\n\t\t\th: currentFrame.frame.h\n\t\t};\n\n\t\tconst newPosition = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\t\tthis._ctxTarget.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\tif (this._fillColor) {\n\n\t\t\tthis._ctxTarget.fillRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\n\t\tif (currentFrame.rotated) {\n\n\t\t\tthis._ctxTarget.save();\n\t\t\tthis._ctxTarget.translate(canvas.width / 2, canvas.height / 2);\n\t\t\tthis._ctxTarget.rotate(-Math.PI / 2);\n\n\t\t\tthis._ctxTarget.translate(-canvas.height / 2, -canvas.width / 2);\n\n\t\t\tnewSize.w = currentFrame.frame.h;\n\t\t\tnewSize.h = currentFrame.frame.w;\n\t\t}\n\n\t\tif (currentFrame.trimmed) {\n\n\t\t\tnewPosition.x = currentFrame.spriteSourceSize.x;\n\t\t\tnewPosition.y = currentFrame.spriteSourceSize.y;\n\n\t\t\tif (currentFrame.rotated) {\n\n\t\t\t\tnewPosition.x = canvas.height - currentFrame.spriteSourceSize.h - currentFrame.spriteSourceSize.y;\n\t\t\t\tnewPosition.y = currentFrame.spriteSourceSize.x;\n\t\t\t}\n\t\t}\n\n\t\tthis._ctxTarget.drawImage(\n\t\t\tthis._canvasCache[this._currentPack],\n\t\t\tcurrentFrame.frame.x,\n\t\t\tcurrentFrame.frame.y,\n\t\t\tnewSize.w,\n\t\t\tnewSize.h,\n\t\t\tnewPosition.x,\n\t\t\tnewPosition.y,\n\t\t\tnewSize.w,\n\t\t\tnewSize.h\n\t\t);\n\n\t\tif (currentFrame.rotated) this._ctxTarget.restore();\n\t}\n\n\tupdate(force = false) {\n\n\t\tif (this._packCached < this._multipackSize) this.drawCache();\n\n\t\tif (!this._isPlaying && !force) return;\n\n\t\tconst now = performance.now();\n\t\tconst delta = now - this._then;\n\n\t\tif (delta < this._interval && !force) return;\n\n\t\tthis._then = now - delta % this._interval;\n\n\t\tthis.draw();\n\n\t\tif (this._current === this._to) {\n\n\t\t\tif (this._repeat) {\n\n\t\t\t\tthis._currentRepeat++;\n\t\t\t\tthis._current = this._from;\n\t\t\t\tthis._currentPack = 0;\n\n\t\t\t\tif (this._onRepeat) this._onRepeat();\n\n\t\t\t\tif (this._repeat > 0 && this._currentRepeat > this._repeat) {\n\n\t\t\t\t\tthis._isPlaying = false;\n\n\t\t\t\t\tif (this._onRepeatComplete) this._onRepeatComplete();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tthis._isPlaying = false;\n\n\t\t\t\tif (this._onComplete) this._onComplete();\n\t\t\t}\n\t\t}\n\t\telse this._current += this._side;\n\t}\n\n\tplay() {\n\n\t\tthis._isPlaying = true;\n\t}\n\n\tpause() {\n\n\t\tthis._isPlaying = false;\n\t}\n\n\tstop() {\n\n\t\tthis._isPlaying = false;\n\t\tthis._current = this._from;\n\t}\n\n\treverse(force = null) {\n\n\t\tif (force !== null) this._side = force ? 1 : -1;\n\t\telse this._side = this._side === 1 ? -1 : 1;\n\n\t\tconst tmpFrom = this._from;\n\t\tconst tmpTo = this._to;\n\n\t\tthis._from = this._side === 1 ? Math.min(tmpFrom, tmpTo) : Math.max(tmpFrom, tmpTo);\n\t\tthis._to = this._side === 1 ? Math.max(tmpFrom, tmpTo) : Math.min(tmpFrom, tmpTo);\n\t}\n\n\tgoFromTo(from, to) {\n\n\t\tif (from >= 0) this._from = from;\n\n\t\tif (to >= 0) this._to = to;\n\n\t\tthis._current = this._from;\n\t\tthis._side = from > to ? -1 : 1;\n\n\t\tthis.findPack();\n\t}\n\n\tgoToAndStop(frame) {\n\n\t\tthis._current = frame;\n\t\tthis._isPlaying = false;\n\t}\n\n\tdestroy() {\n\n\t\tthis._isPlaying = false;\n\n\t\tthis._ctxTarget.clearRect(0, 0, this._canvasTarget.width, this._canvasTarget.height);\n\t}\n\n\tget canvas() {\n\n\t\treturn this._canvasTarget;\n\t}\n\n\tset fps(nbr) {\n\n\t\tthis._interval = 1000 / nbr;\n\t}\n\n\tset loop(val) {\n\n\t\tif (val) this._repeat = -1;\n\t\telse if (this._repeat === -1) this._repeat = 0;\n\t}\n\n\tset repeat(nbr) {\n\n\t\tthis._repeat = nbr;\n\t\tthis._currentRepeat = 0;\n\t}\n\n\tset onComplete(fn) {\n\n\t\tthis._onComplete = fn;\n\t}\n\n\tset onRepeat(fn) {\n\n\t\tthis._onRepeat = fn;\n\t}\n\n\tset onRepeatComplete(fn) {\n\n\t\tthis._onRepeatComplete = fn;\n\t}\n}\n"]}