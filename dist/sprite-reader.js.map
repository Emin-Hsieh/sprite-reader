{"version":3,"file":"generated.js","sources":["node_modules/browser-pack/_prelude.js","src/SpriteReader.js"],"names":["f","exports","module","define","amd","g","window","global","self","this","SpriteReader","e","t","n","r","s","o","u","a","require","i","Error","code","l","call","length",1,"arguments","autoplay","h","canvas","fillColor","c","_","fps","from","m","loop","d","v","onReady","p","onComplete","y","k","onRepeat","C","w","onRepeatComplete","x","P","repeat","T","R","retina","S","j","reverse","z","b","to","A","_classCallCheck","Array","isArray","_image","_json","_canvasCache","_ctxCache","_packCached","_canvasTarget","document","createElement","_ctxTarget","_multipackSize","_currentPack","_currentRepeat","_from","_current","_to","_isPlaying","_repeat","_fillColor","_interval","_then","_onReady","_onComplete","_onRepeat","_onRepeatComplete","_total","M","frames","_side","E","I","Math","max","min","O","D","cloneNode","width","meta","size","height","getContext","sourceSize","Object","assign","style","fillStyle","update","_createClass","key","value","getCurrentRelatedToPack","drawImage","getImageData","putImageData","checkPack","frame","clearRect","fillRect","rotated","save","translate","rotate","PI","trimmed","spriteSourceSize","restore","drawCache","performance","now","draw","findPack","get","set"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export default class SpriteReader {\n\n\tconstructor(image = null, json = null, {\n\t\tautoplay = true,\n\t\tcanvas = null,\n\t\tfillColor = null,\n\t\tfps = 30,\n\t\tfrom = 0,\n\t\tloop = false,\n\t\tonReady = null,\n\t\tonComplete = null,\n\t\tonRepeat = null,\n\t\tonRepeatComplete = null,\n\t\trepeat = 0,\n\t\tretina = false,\n\t\treverse = false,\n\t\tto = null\n\t} = {}) {\n\n\t\tif (!image) throw new Error('image parameter can not be null');\n\t\tif (!json) throw new Error('json parameter can not be null');\n\t\tif (Array.isArray(image) && Array.isArray(json) && image.length !== json.length) throw new Error('image length must be equal to json length');\n\n\t\tthis._image = image;\n\t\tthis._json = json;\n\n\t\tthis._canvasCache = [];\n\t\tthis._ctxCache = [];\n\t\tthis._packCached = 0;\n\t\tthis._canvasTarget = canvas || document.createElement('canvas');\n\t\tthis._ctxTarget = null;\n\n\t\tthis._multipackSize = image.length || 1;\n\t\tthis._currentPack = 0;\n\t\tthis._currentRepeat = 0;\n\n\t\tthis._from = from;\n\t\tthis._current = from;\n\t\tthis._to = to;\n\n\t\tthis._isPlaying = autoplay;\n\t\tthis._repeat = loop ? -1 : repeat;\n\n\t\tthis._fillColor = fillColor;\n\n\t\tthis._interval = 1000 / fps;\n\t\tthis._then = null;\n\n\t\tthis._onReady = onReady;\n\t\tthis._onComplete = onComplete;\n\t\tthis._onRepeat = onRepeat;\n\t\tthis._onRepeatComplete = onRepeatComplete;\n\n\t\tif (!Array.isArray(this._image)) this._image = [this._image];\n\t\tif (!Array.isArray(this._json)) this._json = [this._json];\n\n\t\tthis._total = 0;\n\n\t\tfor (let i = 0; i < this._multipackSize; i++) {\n\n\t\t\tthis._total += this._json[i].frames.length;\n\t\t}\n\n\t\tif (this._to === null) {\n\n\t\t\tthis._to = this._total - 1;\n\t\t}\n\n\t\tthis._side = reverse || this._from > this._to ? -1 : 1;\n\n\t\tif (this._side === -1 && this._from < this._to) {\n\n\t\t\tconst tmpFrom = this._from;\n\t\t\tconst tmpTo = this._to;\n\n\t\t\tthis._from = Math.max(tmpFrom, tmpTo);\n\t\t\tthis._to = Math.min(tmpFrom, tmpTo);\n\t\t}\n\n\t\tconst tmpCanvas = document.createElement('canvas');\n\n\t\tfor (let i = 0; i < this._multipackSize; i++) {\n\n\t\t\tthis._canvasCache[i] = tmpCanvas.cloneNode(false);\n\n\t\t\tthis._canvasCache[i].width = this._json[i].meta.size.w;\n\t\t\tthis._canvasCache[i].height = this._json[i].meta.size.h;\n\n\t\t\tthis._ctxCache[i] = this._canvasCache[i].getContext('2d');\n\t\t}\n\n\t\tif (!canvas) {\n\n\t\t\tthis._canvasTarget.width = this._json[0].frames[0].sourceSize.w;\n\t\t\tthis._canvasTarget.height = this._json[0].frames[0].sourceSize.h;\n\n\t\t\tObject.assign(this._canvasTarget.style, {\n\t\t\t\twidth: `${this._canvasTarget.width / (retina ? 2 : 1)}px`,\n\t\t\t\theight: `${this._canvasTarget.height / (retina ? 2 : 1)}px`\n\t\t\t});\n\t\t}\n\n\t\tthis._ctxTarget = this._canvasTarget.getContext('2d');\n\n\t\tif (fillColor) this._ctxTarget.fillStyle = fillColor;\n\n\t\tthis.update(true);\n\t}\n\n\t// find the pack that contains the current frame\n\n\tfindPack() {\n\n\t\tlet currentTmp = 0;\n\t\tlet currentPackTmp = 0;\n\n\t\twhile (this._current > currentTmp) {\n\n\t\t\tcurrentTmp += this._json[currentPackTmp].frames.length;\n\n\t\t\tif (this._current > currentTmp) currentPackTmp++;\n\t\t}\n\n\t\tthis._currentPack = currentPackTmp;\n\t}\n\n\t// check if we are targeting outside the current pack\n\n\tcheckPack() {\n\n\t\tif (this.getCurrentRelatedToPack() > this._json[this._currentPack].frames.length - 1) {\n\n\t\t\tif (this._currentPack < this._multipackSize - 1) this._currentPack++;\n\t\t\telse this._currentPack = 0;\n\t\t}\n\t}\n\n\t// get an index0 based number related to the current pack\n\n\tgetCurrentRelatedToPack() {\n\n\t\tlet increment = 0;\n\n\t\tfor (let i = 0; i < this._currentPack; i++) increment += this._json[i].frames.length;\n\n\t\treturn this._current - increment;\n\t}\n\n\tdrawCache() {\n\n\t\tconst index = this._packCached;\n\t\tconst tmpCanvas = document.createElement('canvas');\n\t\tconst tmpCtx = tmpCanvas.getContext('2d');\n\n\t\ttmpCanvas.width = this._canvasCache[index].width;\n\t\ttmpCanvas.height = this._canvasCache[index].height;\n\n\t\ttmpCtx.drawImage(this._image[index], 0, 0);\n\t\tconst imgData = tmpCtx.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height);\n\t\tthis._ctxCache[index].putImageData(imgData, 0, 0);\n\n\t\tthis._packCached++;\n\n\t\tif (this._packCached === this._multipackSize && this._onReady) this._onReady();\n\n\t\t// if you simply call the below line, you will have latency when switching pack\n\n\t\t// this._ctxCache[i].drawImage(this._image[i], 0, 0);\n\t}\n\n\tdraw() {\n\n\t\tconst canvas = this._canvasTarget;\n\n\t\tthis.checkPack();\n\n\t\tconst currentFrame = this._json[this._currentPack].frames[this.getCurrentRelatedToPack()];\n\n\t\tconst newSize = {\n\t\t\tw: currentFrame.frame.w,\n\t\t\th: currentFrame.frame.h\n\t\t};\n\n\t\tconst newPosition = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\t\tthis._ctxTarget.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\tif (this._fillColor) {\n\n\t\t\tthis._ctxTarget.fillRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\n\t\tif (currentFrame.rotated) {\n\n\t\t\tthis._ctxTarget.save();\n\t\t\tthis._ctxTarget.translate(canvas.width / 2, canvas.height / 2);\n\t\t\tthis._ctxTarget.rotate(-Math.PI / 2);\n\n\t\t\tthis._ctxTarget.translate(-canvas.height / 2, -canvas.width / 2);\n\n\t\t\tnewSize.w = currentFrame.frame.h;\n\t\t\tnewSize.h = currentFrame.frame.w;\n\t\t}\n\n\t\tif (currentFrame.trimmed) {\n\n\t\t\tnewPosition.x = currentFrame.spriteSourceSize.x;\n\t\t\tnewPosition.y = currentFrame.spriteSourceSize.y;\n\n\t\t\tif (currentFrame.rotated) {\n\n\t\t\t\tnewPosition.x = canvas.height - currentFrame.spriteSourceSize.h - currentFrame.spriteSourceSize.y;\n\t\t\t\tnewPosition.y = currentFrame.spriteSourceSize.x;\n\t\t\t}\n\t\t}\n\n\t\tthis._ctxTarget.drawImage(\n\t\t\tthis._canvasCache[this._currentPack],\n\t\t\tcurrentFrame.frame.x,\n\t\t\tcurrentFrame.frame.y,\n\t\t\tnewSize.w,\n\t\t\tnewSize.h,\n\t\t\tnewPosition.x,\n\t\t\tnewPosition.y,\n\t\t\tnewSize.w,\n\t\t\tnewSize.h\n\t\t);\n\n\t\tif (currentFrame.rotated) this._ctxTarget.restore();\n\t}\n\n\tupdate(force = false) {\n\n\t\tif (this._packCached < this._multipackSize) this.drawCache();\n\n\t\tif (!this._isPlaying && !force) return;\n\n\t\tconst now = performance.now();\n\t\tconst delta = now - this._then;\n\n\t\tif (delta < this._interval && !force) return;\n\n\t\tthis._then = now - delta % this._interval;\n\n\t\tthis.draw();\n\n\t\tif (this._current === this._to) {\n\n\t\t\tif (this._repeat) {\n\n\t\t\t\tthis._currentRepeat++;\n\t\t\t\tthis._current = this._from;\n\t\t\t\tthis._currentPack = 0;\n\n\t\t\t\tif (this._onRepeat) this._onRepeat();\n\n\t\t\t\tif (this._repeat > 0 && this._currentRepeat > this._repeat) {\n\n\t\t\t\t\tthis._isPlaying = false;\n\n\t\t\t\t\tif (this._onRepeatComplete) this._onRepeatComplete();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tthis._isPlaying = false;\n\n\t\t\t\tif (this._onComplete) this._onComplete();\n\t\t\t}\n\t\t}\n\t\telse if (!force) this._current += this._side;\n\t}\n\n\tplay() {\n\n\t\tthis._isPlaying = true;\n\t}\n\n\tpause() {\n\n\t\tthis._isPlaying = false;\n\t}\n\n\tstop() {\n\n\t\tthis._isPlaying = false;\n\t\tthis._current = this._from;\n\t}\n\n\treverse(force = null) {\n\n\t\tif (force !== null) this._side = force ? 1 : -1;\n\t\telse this._side = this._side === 1 ? -1 : 1;\n\n\t\tconst tmpFrom = this._from;\n\t\tconst tmpTo = this._to;\n\n\t\tthis._from = this._side === 1 ? Math.min(tmpFrom, tmpTo) : Math.max(tmpFrom, tmpTo);\n\t\tthis._to = this._side === 1 ? Math.max(tmpFrom, tmpTo) : Math.min(tmpFrom, tmpTo);\n\t}\n\n\tgoFromTo(from, to) {\n\n\t\tif (from >= 0) this._from = from;\n\n\t\tif (to >= 0) this._to = to;\n\n\t\tthis._current = this._from;\n\t\tthis._side = from > to ? -1 : 1;\n\n\t\tthis.findPack();\n\t}\n\n\tgoToAndStop(frame) {\n\n\t\tthis._current = frame;\n\t\tthis._isPlaying = false;\n\n\t\tthis.findPack();\n\n\t\tthis.update(true);\n\t}\n\n\tdestroy() {\n\n\t\tthis._isPlaying = false;\n\n\t\tthis._ctxTarget.clearRect(0, 0, this._canvasTarget.width, this._canvasTarget.height);\n\t}\n\n\tget canvas() {\n\n\t\treturn this._canvasTarget;\n\t}\n\n\tget current() {\n\n\t\treturn this._current;\n\t}\n\n\tget total() {\n\n\t\treturn this._total;\n\t}\n\n\tset fps(nbr) {\n\n\t\tthis._interval = 1000 / nbr;\n\t}\n\n\tset loop(val) {\n\n\t\tif (val) this._repeat = -1;\n\t\telse if (this._repeat === -1) this._repeat = 0;\n\t}\n\n\tset repeat(nbr) {\n\n\t\tthis._repeat = nbr;\n\t\tthis._currentRepeat = 0;\n\t}\n\n\tset onComplete(fn) {\n\n\t\tthis._onComplete = fn;\n\t}\n\n\tset onRepeat(fn) {\n\n\t\tthis._onRepeat = fn;\n\t}\n\n\tset onRepeatComplete(fn) {\n\n\t\tthis._onRepeatComplete = fn;\n\t}\n}\n"]}