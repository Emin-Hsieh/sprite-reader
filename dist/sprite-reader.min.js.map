{"version":3,"file":"generated.js","sources":["node_modules/browser-pack/_prelude.js","src/SpriteReader.js"],"names":["e","t","n","r","s","o","u","a","require","i","f","Error","code","l","exports","call","length",1,"module","SpriteReader","arguments","image","json","h","autoplay","canvas","c","_","fillColor","fps","g","p","from","m","d","loop","v","onReady","k","y","onComplete","C","w","onRepeat","x","P","onRepeatComplete","T","R","repeat","S","j","retina","z","b","to","E","_classCallCheck","this","_image","_json","_canvasCache","_ctxCache","_packCached","_canvasTarget","document","createElement","_ctxTarget","_multipackSize","_currentPack","_currentRepeat","_from","_current","_to","_isPlaying","_repeat","_fillColor","_interval","_then","_onReady","_onComplete","_onRepeat","_onRepeatComplete","M","I","frames","_side","O","D","cloneNode","width","meta","size","height","getContext","sourceSize","Object","assign","style","fillStyle","update","_createClass","key","value","getCurrentRelatedToPack","drawImage","getImageData","putImageData","checkPack","frame","clearRect","fillRect","rotated","save","translate","rotate","Math","PI","trimmed","spriteSourceSize","restore","drawCache","performance","now","draw","min","max","findPack","get","set"],"mappings":"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","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","export default class SpriteReader {\n\n\tconstructor({\n\t\timage = null,\n\t\tjson = null,\n\n\t\tautoplay = true,\n\t\tcanvas = null,\n\t\tfillColor = null,\n\t\tfps = 30,\n\t\tfrom = 0,\n\t\tloop = false,\n\t\tonReady = null,\n\t\tonComplete = null,\n\t\tonRepeat = null,\n\t\tonRepeatComplete = null,\n\t\trepeat = 0,\n\t\tretina = false,\n\t\tto = null\n\t} = {}) {\n\n\t\tif (!image) throw new Error('image parameter can not be null');\n\t\tif (!json) throw new Error('json parameter can not be null');\n\t\tif (image.length && json.length && image.length !== json.length) throw new Error('image length must be equal to json length');\n\n\t\tthis._image = image;\n\t\tthis._json = json;\n\n\t\tthis._canvasCache = [];\n\t\tthis._ctxCache = [];\n\t\tthis._packCached = 0;\n\t\tthis._canvasTarget = canvas || document.createElement('canvas');\n\t\tthis._ctxTarget = null;\n\n\t\tthis._multipackSize = image.length || 1;\n\t\tthis._currentPack = 0;\n\t\tthis._currentRepeat = 0;\n\n\t\tthis._from = from;\n\t\tthis._current = from;\n\t\tthis._to = to;\n\n\t\tthis._isPlaying = autoplay;\n\t\tthis._repeat = loop ? -1 : repeat;\n\n\t\tthis._fillColor = fillColor;\n\n\t\tthis._interval = 1000 / fps;\n\t\tthis._then = null;\n\n\t\tthis._onReady = onReady;\n\t\tthis._onComplete = onComplete;\n\t\tthis._onRepeat = onRepeat;\n\t\tthis._onRepeatComplete = onRepeatComplete;\n\n\t\tif (!this._image.length) this._image = [this._image];\n\t\tif (!this._json.length) this._json = [this._json];\n\n\t\tif (this._to === null) {\n\n\t\t\tlet total = 0;\n\n\t\t\tfor (let i = 0; i < this._multipackSize; i++) {\n\n\t\t\t\ttotal += this._json[i].frames.length;\n\t\t\t}\n\n\t\t\tthis._to = total - 1;\n\t\t}\n\n\t\tthis._side = this._from > this._to ? -1 : 1;\n\n\t\tconst tmpCanvas = document.createElement('canvas');\n\n\t\tfor (let i = 0; i < this._multipackSize; i++) {\n\n\t\t\tthis._canvasCache[i] = tmpCanvas.cloneNode(false);\n\n\t\t\tthis._canvasCache[i].width = this._json[i].meta.size.w;\n\t\t\tthis._canvasCache[i].height = this._json[i].meta.size.h;\n\n\t\t\tthis._ctxCache[i] = this._canvasCache[i].getContext('2d');\n\t\t}\n\n\t\tif (!canvas) {\n\n\t\t\tthis._canvasTarget.width = this._json[0].frames[0].sourceSize.w;\n\t\t\tthis._canvasTarget.height = this._json[0].frames[0].sourceSize.h;\n\n\t\t\tObject.assign(this._canvasTarget.style, {\n\t\t\t\twidth: `${this._canvasTarget.width / (retina ? 2 : 1)}px`,\n\t\t\t\theight: `${this._canvasTarget.height / (retina ? 2 : 1)}px`\n\t\t\t});\n\t\t}\n\n\t\tthis._ctxTarget = this._canvasTarget.getContext('2d');\n\n\t\tif (fillColor) this._ctxTarget.fillStyle = fillColor;\n\n\t\tthis.update(true);\n\t}\n\n\t// find the pack that contains the current frame\n\n\tfindPack() {\n\n\t\tlet currentTmp = 0;\n\t\tlet currentPackTmp = 0;\n\n\t\twhile (this._current > currentTmp) {\n\n\t\t\tcurrentTmp += this._json[currentPackTmp].frames.length;\n\n\t\t\tif (this._current > currentTmp) currentPackTmp++;\n\t\t}\n\n\t\tthis._currentPack = currentPackTmp;\n\t}\n\n\t// check if we are targeting outside the current pack\n\n\tcheckPack() {\n\n\t\tif (this.getCurrentRelatedToPack() > this._json[this._currentPack].frames.length - 1) {\n\n\t\t\tif (this._currentPack < this._multipackSize - 1) this._currentPack++;\n\t\t\telse this._currentPack = 0;\n\t\t}\n\t}\n\n\t// get an index0 based number related to the current pack\n\n\tgetCurrentRelatedToPack() {\n\n\t\tlet increment = 0;\n\n\t\tfor (let i = 0; i < this._currentPack; i++) increment += this._json[i].frames.length;\n\n\t\treturn this._current - increment;\n\t}\n\n\tdrawCache(index) {\n\n\t\tconst tmpCanvas = document.createElement('canvas');\n\t\tconst tmpCtx = tmpCanvas.getContext('2d');\n\n\t\ttmpCanvas.width = this._canvasCache[index].width;\n\t\ttmpCanvas.height = this._canvasCache[index].height;\n\n\t\ttmpCtx.drawImage(this._image[index], 0, 0);\n\t\tconst imgData = tmpCtx.getImageData(0, 0, tmpCanvas.width, tmpCanvas.height);\n\t\tthis._ctxCache[index].putImageData(imgData, 0, 0);\n\n\t\tthis._packCached++;\n\n\t\tif (this._packCached === this._multipackSize && this._onReady) this._onReady();\n\n\t\t// if you simply call the below line, you will have latency when switching pack\n\n\t\t// this._ctxCache[i].drawImage(this._image[i], 0, 0);\n\t}\n\n\tdraw() {\n\n\t\tconst canvas = this._canvasTarget;\n\n\t\tthis.checkPack();\n\n\t\tconst currentFrame = this._json[this._currentPack].frames[this.getCurrentRelatedToPack()];\n\n\t\tconst newSize = {\n\t\t\tw: currentFrame.frame.w,\n\t\t\th: currentFrame.frame.h\n\t\t};\n\n\t\tconst newPosition = {\n\t\t\tx: 0,\n\t\t\ty: 0\n\t\t};\n\n\t\tthis._ctxTarget.clearRect(0, 0, canvas.width, canvas.height);\n\n\t\tif (this._fillColor) {\n\n\t\t\tthis._ctxTarget.fillRect(0, 0, canvas.width, canvas.height);\n\t\t}\n\n\t\tif (currentFrame.rotated) {\n\n\t\t\tthis._ctxTarget.save();\n\t\t\tthis._ctxTarget.translate(canvas.width / 2, canvas.height / 2);\n\t\t\tthis._ctxTarget.rotate(-Math.PI / 2);\n\n\t\t\tthis._ctxTarget.translate(-canvas.height / 2, -canvas.width / 2);\n\n\t\t\tnewSize.w = currentFrame.frame.h;\n\t\t\tnewSize.h = currentFrame.frame.w;\n\t\t}\n\n\t\tif (currentFrame.trimmed) {\n\n\t\t\tnewPosition.x = currentFrame.spriteSourceSize.x;\n\t\t\tnewPosition.y = currentFrame.spriteSourceSize.y;\n\n\t\t\tif (currentFrame.rotated) {\n\n\t\t\t\tnewPosition.x = canvas.height - currentFrame.spriteSourceSize.h - currentFrame.spriteSourceSize.y;\n\t\t\t\tnewPosition.y = currentFrame.spriteSourceSize.x;\n\t\t\t}\n\t\t}\n\n\t\tthis._ctxTarget.drawImage(\n\t\t\tthis._canvasCache[this._currentPack],\n\t\t\tcurrentFrame.frame.x,\n\t\t\tcurrentFrame.frame.y,\n\t\t\tnewSize.w,\n\t\t\tnewSize.h,\n\t\t\tnewPosition.x,\n\t\t\tnewPosition.y,\n\t\t\tnewSize.w,\n\t\t\tnewSize.h\n\t\t);\n\n\t\tif (currentFrame.rotated) this._ctxTarget.restore();\n\t}\n\n\tupdate(force = false) {\n\n\t\tif (this._packCached < this._multipackSize) this.drawCache(this._packCached);\n\n\t\tif (!this._isPlaying && !force) return;\n\n\t\tconst now = performance.now();\n\t\tconst delta = now - this._then;\n\n\t\tif (delta < this._interval && !force) return;\n\n\t\tthis._then = now - delta % this._interval;\n\n\t\tthis.draw();\n\n\t\tif (this._current === this._to) {\n\n\t\t\tif (this._repeat) {\n\n\t\t\t\tthis._currentRepeat++;\n\t\t\t\tthis._current = this._from;\n\t\t\t\tthis._currentPack = 0;\n\n\t\t\t\tif (this._onRepeat) this._onRepeat();\n\n\t\t\t\tif (this._repeat > 0 && this._currentRepeat > this._repeat) {\n\n\t\t\t\t\tthis._isPlaying = false;\n\n\t\t\t\t\tif (this._onRepeatComplete) this._onRepeatComplete();\n\t\t\t\t}\n\t\t\t}\n\t\t\telse {\n\n\t\t\t\tthis._isPlaying = false;\n\n\t\t\t\tif (this._onComplete) this._onComplete();\n\t\t\t}\n\t\t}\n\t\telse this._current += this._side;\n\t}\n\n\tplay() {\n\n\t\tthis._isPlaying = true;\n\t}\n\n\tpause() {\n\n\t\tthis._isPlaying = false;\n\t}\n\n\tstop() {\n\n\t\tthis._isPlaying = false;\n\t\tthis._current = this._from;\n\t}\n\n\treverse(side) {\n\n\t\tif (side === 1 || side === -1) this._side = side;\n\t\telse this._side = this._side === 1 ? -1 : 1;\n\n\t\tconst tmpFrom = this._from;\n\t\tconst tmpTo = this._to;\n\n\t\tthis._side === 1 ? this._from = Math.min(tmpFrom, tmpTo) : Math.max(tmpFrom, tmpTo);\n\t\tthis._side === 1 ? this._to = Math.max(tmpFrom, tmpTo) : Math.min(tmpFrom, tmpTo);\n\t}\n\n\tgoFromTo(from, to) {\n\n\t\tif (from >= 0) this._from = from;\n\n\t\tif (to >= 0) this._to = to;\n\n\t\tthis._current = this._from;\n\t\tthis._side = from > to ? -1 : 1;\n\n\t\tthis.findPack();\n\t}\n\n\tgoToAndStop(frame) {\n\n\t\tthis._current = frame;\n\t\tthis._isPlaying = false;\n\t}\n\n\tdestroy() {\n\n\t\tthis._isPlaying = false;\n\n\t\tthis._ctxTarget.clearRect(0, 0, this._canvasTarget.width, this._canvasTarget.height);\n\t}\n\n\tget canvas() {\n\n\t\treturn this._canvasTarget;\n\t}\n\n\tset fps(nbr) {\n\n\t\tthis._interval = 1000 / nbr;\n\t}\n\n\tset loop(val) {\n\n\t\tif (val) this._repeat = -1;\n\t\telse if (this._repeat === -1) this._repeat = 0;\n\t}\n\n\tset repeat(nbr) {\n\n\t\tthis._repeat = nbr;\n\t\tthis._currentRepeat = 0;\n\t}\n\n\tset onComplete(fn) {\n\n\t\tthis._onComplete = fn;\n\t}\n\n\tset onRepeat(fn) {\n\n\t\tthis._onRepeat = fn;\n\t}\n\n\tset onRepeatComplete(fn) {\n\n\t\tthis._onRepeatComplete = fn;\n\t}\n}\n"]}